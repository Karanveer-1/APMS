<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>IGNORED!</title>
</h:head>

<h:body>
    <ui:composition template="/templates/MasterLayout.xhtml">
    
        <ui:define name="windowTitle">Employee</ui:define>
        <ui:define name="headerTitle"><h:outputText value="Employees" class="navbar-brand"/></ui:define>
        <ui:define name="navBar"><ui:include src="/sections/EmployeeNavigationBar.xhtml" /></ui:define>
        
        <ui:define name="content">
        
            <p:panel id="basic" 
           			header="List of Currently Active Employees" footer="This table includes present employees" 
           			style="margin-left:50px; margin-right:50px; text-align:center">
        
            <h:form id="formMain" style="margin-top:20px">
            
            <img src="resources/images/ActiveEmployee.png" style="max-width:20%; height: 100%; width: 100%; object-fit: contain"></img>
            
            
            
                
                <p:dataTable id="employeeTable" scrollable="true" scrollHeight="3%"
                    value="#{employeesController.employees}" var="employee" style="display:block; margin-top: 20px; margin-left:30px;">
                    <p:column headerText="Employee No">
                        <h:outputText value="#{employee.empNumber}" />
                    </p:column>
                    <p:column headerText="First Name">
                        <h:outputText value="#{employee.firstName}" />
                    </p:column>
                    <p:column headerText="Last Name">
                        <h:outputText value="#{employee.lastName}" />
                    </p:column>
                    <p:column headerText="Username">
                        <h:outputText value="#{employee.userName}" />
                    </p:column>
                    <p:column headerText="State">
                        <h:outputText value="#{employee.state}" />
                    </p:column>
        			<p:column headerText="Supervisor">
		        		<h:outputText value="#{employeesController.getEmployeeById(employee.superEmpNo).userName}"/>
		    		</p:column>
                    <p:column headerText="Comment">
                        <h:outputText value="#{employee.comment}" />
                    </p:column>
                    <p:column headerText="Edit">
                        <p:commandLink update=":#{p:component('editDialog')}"
                            action="#{employeesController.setEditEmployee(employee)}">
                            <h:graphicImage value="resources/images/edit.png" style="max-width:40%; max-height:40%"/>
                        </p:commandLink>
                    </p:column>
                    <p:column headerText="Remove">
                        <p:commandLink update="employeeTable"
                            action="#{employeesController.deleteEmployee(employee)}">
                           <h:graphicImage value="resources/images/error.png" style="max-width:40%; max-height:40%"/>	
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
                
                <p:commandLink onclick="PF('addEmployeeDialog').show();"
                	style="float: right; margin-top: 15px; margin-bottom:30px">
                    <h:graphicImage value="resources/images/plus.png" style="max-width:20%; max-height:30%; float: right;"/>               	
                </p:commandLink>
                <p:growl id="invalidEmployeeGrowl" sticky="false" />
				
                
            </h:form>
        	
            <p:dialog id="addDialog" header="Add Employee" modal="true" width="400"
                widgetVar="addEmployeeDialog" resizable="false" draggable="false">
                
                
                <h:form id="formAddDialog">
                <h:panelGrid columns="2" cellpadding = "10" cellspacing = "5">
                        <h:outputText value="Employee Number" />
                        <h:inputText id="addEmpNo" binding="#{addEmpNoText}" />
        
                        <h:outputText id="addFirstName" value="First Name" />
                        <h:inputText binding="#{addFirstNameText}" />
        
                        <h:outputText id="addlastName" value="Last Name" />
                        <h:inputText binding="#{addLastNameText}" />
        
                        <h:outputText id="addUsername" value="Username" />
                        <h:inputText binding="#{addUsernameText}" />

                        <h:outputText id="addPassword" value="Password" />
                        <h:inputText binding="#{addPasswordText}" />
                        
						<h:outputText id="addSupervisor" value="Supervisor" />
                        <h:selectOneMenu binding="#{addSupervisorText}"> 
   							<f:selectItems value="#{employeesController.employees}" var="e"
   								itemLabel="#{e.userName}" itemValue="#{e.empNumber}" />
   						</h:selectOneMenu>
        
                        <h:outputText id="addComment" value="Comment" />
                        <h:inputText binding="#{addCommentText}" />
        				</h:panelGrid>
        				
                        <p:commandButton resetValues="true"
                            update=":formMain:employeeTable :formMain:invalidEmployeeGrowl :formAddDialog"
                            value="Save"
                            action="#{employeesController.addEmployee(
                                    addEmpNoText.value,
                                    addFirstNameText.value,
                                    addLastNameText.value,
                                    addUsernameText.value,
                                    addPasswordText.value,
                                    addSupervisorText.value,
                                    addCommentText.value)}" />
                </h:form>
            </p:dialog>

            <p:dialog id="editDialog" header="Edit Employee" modal="true"
                width="400" widgetVar="editEmployeeDialog" resizable="false"
                draggable="false">
                <h:form id="formEditDialog">
                    <h:panelGrid columns="1">
                        <h:outputText value="First Name" />
                        <h:inputText binding="#{editFirstNameText}"
                            value="#{employeesController.editEmployee.firstName}" />
        
                        <h:outputText value="Last Name" />
                        <h:inputText binding="#{editLastNameText}"
                            value="#{employeesController.editEmployee.lastName}" />
        
                        <h:outputText value="Username" />
                        <h:inputText binding="#{editUsernameText}"
                            value="#{employeesController.editEmployee.userName}" />
        
                        <h:outputText value="Password" />
                        <h:inputText binding="#{editPasswordText}"
                            value="#{employeesController.editEmployee.password}" />
                            
                        <h:outputText value="Supervisor" />
                        <h:selectOneMenu value="#{employeesController.editEmployee.superEmpNo}" binding="#{editSupervisorText}"> 
   							<f:selectItems value="#{employeesController.employees}" var="e"
   								itemLabel="#{e.userName}" itemValue="#{e.empNumber}" />
   						</h:selectOneMenu>
        
                        <h:outputText id="editComment" value="Comment" />
                        <h:inputText binding="#{editCommentText}"
                            value="#{employeesController.editEmployee.comment}" />
        
                        <p:commandButton
                            update=":formMain:employeeTable :formMain:invalidEmployeeGrowl :formEditDialog"
                            value="Save"
                            action="#{employeesController.editEmployee(
                                    editFirstNameText.value,
                                    editLastNameText.value,
                                    editUsernameText.value,
                                    editPasswordText.value,
                                    editSupervisorText.value,
                                    editCommentText.value)}" />
                        
                    </h:panelGrid>
                </h:form>
            </p:dialog>
            </p:panel>
        </ui:define>
    </ui:composition>
</h:body>
</html>